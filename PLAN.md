# RPGゲーム開発計画

## 概要
このプロジェクトは、可愛い女の子が主人公のブラウザ向けRPGを開発することを目的としています。HTMLには一つの`<canvas>`要素のみを配置し、UIを含めたすべての描画をCanvas上で行います。外部ライブラリを用いず、最新のChromeで動作する最新のJavaScript仕様を活用して実装します。

## ディレクトリ構成
- `index.html` — `<canvas>`要素だけを持ち、`main.js`をESモジュールとして読み込む。
- `main.js` — ゲーム初期化処理とメインループを司るエントリーポイント。
- `engine/` — ゲームエンジン関連の共通処理をまとめる。
  - `canvas.js` — Canvasの初期設定や基本的な描画ユーティリティ。
  - `input.js` — キーボードおよびポインタ入力の管理。
  - `scene.js` — タイトル画面、フィールド、バトルなどのシーン切り替え管理。
  - `sprite.js` — スプライト画像の読み込みとアニメーション制御。
- `game/` — ゲーム固有のロジックを実装。
  - `player.js` — 主人公キャラクターの移動やステータス管理。
  - `world.js` — マップデータの読み込みとマップ上のオブジェクト管理。
  - `battle.js` — シンプルなターン制バトルシステム。
  - `ui.js` — ダイアログやメニューなど、Canvas上に描画されるUIコンポーネント。
- `assets/` — 画像やマップデータ等のアセットを配置。

## 開発方針
1. **最新のJS文法を活用**：クラスのプライベートフィールド、非同期処理（`async`/`await`）、オプショナルチェーンなどを積極的に利用する。
2. **モジュール化**：各機能をモジュール単位で分離し、拡張や修正を容易にする。
3. **非同期アセット読み込み**：画像やデータファイルは`fetch`および`createImageBitmap`を用いて事前ロード。
4. **ゲームループ**：`requestAnimationFrame`によるスムーズな描画更新を実現。
5. **状態管理**：シーンやプレイヤー情報などの状態はクラスを中心に保持し、可読性を高める。

## 具体的な実装ステップ
1. `index.html`と`main.js`を作成し、Canvasの初期化と基本描画を確認する。
2. `engine/`内の各モジュールを作成し、入力処理やシーン管理の基礎を実装。
3. `game/`フォルダでプレイヤーキャラクターとマップ表示を実装し、フィールド移動を可能にする。
4. バトルシステムとメニューUIを作成し、RPGとしての基本機能を整える。
5. アセットを充実させ、テキストや画像を追加してゲーム性と世界観を向上させる。

## 今後の展望
- ストーリーイベントや追加マップを容易に拡張できる設計とする。
- テスト用ツールやデバッグ表示をCanvas上に実装し、開発効率を高める。
- 最終的にはデプロイスクリプトを用意し、ブラウザで気軽にプレイできる形で公開する。
